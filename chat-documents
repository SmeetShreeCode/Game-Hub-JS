Yes, you can implement that restriction by tracking the player's completed levels per chapter and mode. Here's how to set up chapter unlock conditions based on the criteria you mentioned:

âœ… Your Condition

To unlock Chapter 2, the player must have:

Completed at least 10 Easy levels

And at least 5 Medium levels
(from Chapter 1)

ğŸ› ï¸ Step-by-Step Implementation
âœ… 1. Track Level Completion

In your state, add a new key to track completed levels:

let state = {
  ...
  completedLevels: JSON.parse(localStorage.getItem("completedLevels")) || {}, // NEW
  ...
};

âœ… 2. Save Completed Levels on Finish

Inside loadLevel() or right after the player completes a level (where you already check if (state.found.length === diffs().length)), add this:

const key = `${state.selectedChapter.chapter}-${state.selectedMode}-${state.currentLevel}`;
if (!state.completedLevels[key]) {
    state.completedLevels[key] = true;
    save("completedLevels", state.completedLevels);
}


This ensures that every completed level is stored by chapter-mode-index.

âœ… 3. Check Chapter Unlock Eligibility

Create a function:

function canUnlockChapter(nextChapterNumber) {
    const required = {
        easy: 10,
        medium: 5
    };

    const completed = {
        easy: 0,
        medium: 0
    };

    Object.keys(state.completedLevels).forEach(key => {
        const [chapter, mode] = key.split("-");
        if (parseInt(chapter) === nextChapterNumber - 1) {
            if (mode === "easy") completed.easy++;
            if (mode === "medium") completed.medium++;
        }
    });

    return completed.easy >= required.easy && completed.medium >= required.medium;
}

âœ… 4. Modify Chapter Button Display

Inside your showChapterSelectScreen() function, update the button creation logic like so:

btn.disabled = chapter.chapter > state.unlockedChapter ||
    (chapter.chapter === state.unlockedChapter + 1 && !canUnlockChapter(chapter.chapter));


This prevents unlocking Chapter 2 until the required levels from Chapter 1 are completed.

âœ… 5. Optionally Auto-Unlock Chapter

You can automatically unlock chapters in endGame(true) when they qualify:

Replace this part:

if (win && state.currentLevel >= state.activeLevels.length - 1 && state.selectedChapter?.chapter === state.unlockedChapter) {
    state.unlockedChapter++;
    save("unlockedChapter", state.unlockedChapter);
}


With this:

if (
    state.selectedChapter?.chapter === state.unlockedChapter &&
    canUnlockChapter(state.unlockedChapter + 1)
) {
    state.unlockedChapter++;
    save("unlockedChapter", state.unlockedChapter);
}

Yes â€” you can absolutely make this game look and feel like a polished, real game, with some focused UI/UX improvements and structural enhancements. You're already very close with the current code â€” itâ€™s functional, modular, and scalable.

âœ… Here's How to Make It Look Like a "Real Game"
ğŸ® 1. Visual Progression System

Show player's chapter progression like a campaign map or level tree.

âœ… Progress bar per chapter with stars (â˜…) showing levels completed.

âœ… Lock icons ğŸ”’ on chapters/modes that aren't unlocked.

âœ… Show âœ… / âœ–ï¸ / â­ next to each level in level select.

â• Add to showLevelSelectScreen():
// After creating each level button
if (state.completedLevels[`${state.selectedChapter.chapter}-${state.selectedMode}-${idx}`]) {
    btn.innerHTML += " âœ…";
}

âœ¨ 2. Animated Transitions

Use CSS animations or fades when changing screens.

.screen {
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
}
.screen.active {
  opacity: 1;
  display: flex;
}


Then toggle .active class in JS to fade in/out screens.

ğŸ”¥ 3. Juicy Game Feedback

Already using fireworks and sparkles! Now add:

Shake effect on wrong click:

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-10px); }
  40%, 80% { transform: translateX(10px); }
}
.shake {
  animation: shake 0.4s;
}


Add els.rightCanvas.classList.add('shake') and remove it after 500ms.

Combo meter UI:
Show ğŸ”¥ Combo x3! at top-center, fade out after 1s.

ğŸ† 4. Achievements & Goals

Track and show things like:

"Found 50 differences!"

"Completed 10 Easy levels"

"Unlocked all Medium levels in Chapter 1"

Just track these in localStorage and show a modal or toast when unlocked.

ğŸ¨ 5. Better Theming

Add CSS themes that feel more "game-like" (e.g. neon, dark mode with particles, or day/night cycles), and allow player to toggle.

You can use CSS variables:

:root {
  --bg-color: #fff;
  --accent: #5aafff;
}
body.dark-theme {
  --bg-color: #121212;
  --accent: #00f0ff;
}


Then apply in all styles like:

body {
  background-color: var(--bg-color);
}
button {
  background-color: var(--accent);
}

ğŸµ 6. Background Music & Sounds

You're already playing sound on events â€” just add looping ambient music:

const backgroundMusic = new Audio('music/loop.mp3');
backgroundMusic.loop = true;
backgroundMusic.volume = 0.3;
if (state.musicOn) backgroundMusic.play();


Allow volume control & mute toggle.

ğŸ“² 7. Mobile-Friendly UI

Improve with:

Larger touch targets (44px min)

Mobile-optimized layout with media queries

Add fullscreen mode

function goFullscreen() {
  const el = document.documentElement;
  if (el.requestFullscreen) el.requestFullscreen();
}

ğŸ“¦ 8. Persistent Player Profile

Save things like:

Player name

Total time played

Total stars

Unlocked chapters, completed levels

Then display it on start screen like:

Welcome back, Alex!
Stars: â­ï¸ x25 | Chapters Unlocked: 3

ğŸ§  9. Tutorial & First-Time UX

Show a quick tutorial overlay when player first starts.

if (!localStorage.getItem("seenTutorial")) {
  showTutorialOverlay();
  localStorage.setItem("seenTutorial", "yes");
}

ğŸ 10. Endgame / Completion Feedback

Once player completes all levels in a chapter or the entire game:

Show endgame animation / cutscene / celebration

Congratulate with stats:
You've found 150 differences in total! ğŸ‰



Game Name Suggestions
ğŸ”¹ Minimal & Stylish

Core Defender

Pulse Blast

Orbit Fire

Neon Core

Dot War

Point Zero

CenterShot

ğŸ”¹ Action-Focused

Incoming!

Blast Radius

Critical Core

Last Stand

Void Rush

ğŸ”¹ Sci-Fi / Futuristic Vibe

Singularity Defense

Orbital Siege

Photon Strike

Gravity Burn

Quantum Assault

ğŸ”¥ For Competitive (PvP)

Core Clash

Dot Arena

BlastZone

Core Wars

ZeroPoint: Duel

GlowFight

CenterFire

ğŸ¤ For Co-op / Survival Together

CoreGuard: Co-Op

Orbital Alliance

Dual Defenders

Synced Core

Team Pulse

CoreStorm

ğŸŒŒ For Flexible Modes (Solo + Multiplayer)

Nexus Blast

Pulse Arena

NeonCore: Online

Zero Point Protocol

HyperCore

Radiant Front




You have two main options, and both are perfectly valid depending on how much integration you want. Iâ€™ll explain them clearly and tell you which one is best.

âœ… Option 1: Run Phaser inside Angular (Recommended)

You can embed your Phaser game directly inside an Angular component.
This keeps your whole site inside Angular, and the Phaser game becomes just one part.

âœ” How it works

Create a <game-canvas> Angular component

Initialize Phaser in that component

Mount Phaser to the component's DOM element

âœ” Structure
src/
  app/
    phaser-game/
      phaser-game.component.ts
      phaser-game.component.html

Example:
phaser-game.component.html
<div id="gameContainer"></div>

phaser-game.component.ts
import { Component, AfterViewInit } from '@angular/core';
import Phaser from 'phaser';
import { MainScene } from './main.scene';

@Component({
  selector: 'app-phaser-game',
  templateUrl: './phaser-game.component.html',
})
export class PhaserGameComponent implements AfterViewInit {
  game!: Phaser.Game;

  ngAfterViewInit() {
    this.game = new Phaser.Game({
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      parent: 'gameContainer',   // Attach Phaser to Angular DOM element
      scene: [MainScene],
      physics: { default: 'arcade' },
    });
  }
}

main.scene.ts
import Phaser from 'phaser';

export class MainScene extends Phaser.Scene {
  constructor() {
    super('MainScene');
  }

  preload() {
    this.load.image('logo', 'assets/logo.png');
  }

  create() {
    this.add.image(400, 300, 'logo');
  }
}

âœ” Result:

Your Phaser game appears inside your Angular page just like any component.

You can route to it using Angular routing, like:

<a routerLink="/game">Play Game</a>

âœ… Option 2: Host Phaser as a separate app, embed with iframe

If your Phaser game is big and you want it separate from Angular, then:

Build Phaser as a standalone website

Host it at:
example.com/game/

Embed in Angular using iframe:

<iframe src="/game/index.html" width="100%" height="600"></iframe>

âœ” Best when:

You want the game completely isolated

You want to reduce Angular â†’ Phaser code complexity

You want to host the game on its own domain or subfolder

ğŸŸ¦ Which Option Should You Choose?
ğŸ‘‰ If your game is part of your Angular site (most common):

Use Option 1 (Run Phaser inside Angular)

ğŸ‘‰ If the game is large, independent, or reused across apps:

Use Option 2 (Standalone Phaser with iframe)

ğŸŸ¢ Recommendation (Simple + Clean)

Use Option 1 unless you have a reason not to.

Because:

easy to maintain

works with Angular routing

no cross-domain issues

no iframe complexity

you can communicate between Angular â†” Phaser easily

ğŸ® If you want, I can guide you next:

I can generate:

âœ” Complete Angular + Phaser starter project
âœ” Step-by-step setup instructions
âœ” File structure and sample scenes
âœ” Best practices (destroying game on route change, sizing, etc.)

Just tell me:
Do you want a ready-to-use Angular + Phaser starter template?



Great! Letâ€™s do Option 1 (Phaser inside Angular) from scratch, step-by-step, as if you're building it for the first time.
This guide is simple, complete, and production-ready.

ğŸ¯ Goal

We will create an Angular component that loads and runs a Phaser 3 game inside the Angular app.

You will get:

âœ” A working Angular + Phaser project
âœ” Proper folder structure
âœ” Scene creation
âœ” Game initialization
âœ” Auto cleanup when leaving the page

Letâ€™s begin!

ğŸŸ¦ STEP 1 â€” Create a New Angular Project

If you donâ€™t already have one:

ng new angular-phaser
cd angular-phaser


If you already have an Angular project, skip this.

ğŸŸ¦ STEP 2 â€” Install Phaser

Inside your Angular project folder:

npm install phaser


This gives you all Phaser features.

ğŸŸ¦ STEP 3 â€” Create a Phaser Component

This is where the game will run.

ng g c phaser-game


Angular now creates:

src/app/phaser-game/
  phaser-game.component.ts
  phaser-game.component.html
  phaser-game.component.css

ğŸŸ¦ STEP 4 â€” Create a Scene File

We will create a folder for Phaser code:

src/app/phaser/


Inside it, create:

main.scene.ts

main.scene.ts
import Phaser from 'phaser';

export class MainScene extends Phaser.Scene {
  constructor() {
    super('MainScene');
  }

  preload() {
    // Load assets (optional for now)
    this.load.image('logo', 'assets/logo.png'); // Put logo.png inside assets folder
  }

  create() {
    // Display logo at center
    this.add.image(400, 300, 'logo');
  }

  update() {
    // Runs @ 60 FPS
  }
}


If you donâ€™t have a logo, create a simple PNG or use any image named logo.png.

ğŸŸ¦ STEP 5 â€” Game Container in HTML
phaser-game.component.html
<div id="gameContainer"></div>


This is where Phaser will attach the canvas.

ğŸŸ¦ STEP 6 â€” Initialize Phaser in Component
phaser-game.component.ts
import { Component, AfterViewInit, OnDestroy } from '@angular/core';
import Phaser from 'phaser';
import { MainScene } from '../phaser/main.scene';

@Component({
  selector: 'app-phaser-game',
  templateUrl: './phaser-game.component.html',
  styleUrls: ['./phaser-game.component.css'],
})
export class PhaserGameComponent implements AfterViewInit, OnDestroy {
  game!: Phaser.Game;

  ngAfterViewInit() {
    const config: Phaser.Types.Core.GameConfig = {
      type: Phaser.AUTO,
      parent: 'gameContainer', // Attach to our div
      width: 800,
      height: 600,
      backgroundColor: '#1d1d1d',
      scene: [MainScene],
      physics: {
        default: 'arcade',
        arcade: {
          gravity: { y: 0 },
          debug: false
        }
      }
    };

    this.game = new Phaser.Game(config);
  }

  ngOnDestroy() {
    // Clean up when leaving the Angular route
    if (this.game) {
      this.game.destroy(true);
    }
  }
}

ğŸŸ¦ STEP 7 â€” Add Phaser Component to Router or Template
Option A â€” Use a route:
app-routing.module.ts
const routes: Routes = [
  { path: 'game', component: PhaserGameComponent }
];


Then open:

http://localhost:4200/game

Option B â€” Put component directly into HTML:

app.component.html

<app-phaser-game></app-phaser-game>

ğŸŸ¦ STEP 8 â€” Add an Asset (Optional but recommended)

Place logo.png inside:

src/assets/logo.png


Otherwise, change the preload URL.

ğŸŸ¦ STEP 9 â€” Run the App
ng serve


Open:

http://localhost:4200/game


You should now see:

ğŸ‰ Your Phaser game running inside Angular!
No iframes. No hacks. Clean & stable.

ğŸŸ© Extra Features (Optional Now, Useful Later)
âœ” Make game resize with screen
âœ” Add keyboard input
âœ” Add animation
âœ” Add character movement
âœ” Use multiple scenes
âœ” Add loading screen
âœ” Add physics objects

If you want, I can walk you through each of these.